{"version":3,"sources":["../../code/lib/parser.js"],"names":["streamParser","END","buffer","chunk","substr","length","indexOf","encoding","callback","toString","itsFinal","push","trim","emit","JSON","parse"],"mappings":";;;;;;;;AAAA;;;;;;;;IAIMA,Y;;;AAEL,uBAAYC,GAAZ,EAAiB;AAAA;;AAAA;;AAEhB,QAAKC,MAAL,GAAc,EAAd;AACA,QAAKD,GAAL,GAAWA,OAAO,MAAlB;AAHgB;AAIhB;;;;2BAEQ;AACR,QAAKC,MAAL,GAAc,EAAd;AACA;;;2BAEQC,K,EAAO;AACf,UAAQA,MAAMC,MAAN,CAAaD,MAAME,MAAN,GAAe,KAAKJ,GAAL,CAASI,MAArC,EAA6CC,OAA7C,CAAqD,KAAKL,GAA1D,CAAD,GAAmE,CAAC,CAA3E;AACA;;;6BAEUE,K,EAAOI,Q,EAAUC,Q,EAAU;AACrC,QAAKN,MAAL,IAAeC,MAAMM,QAAN,CAAe,MAAf,CAAf;AACA,OAAG,KAAKC,QAAL,CAAc,KAAKR,MAAnB,CAAH,EAA+B;AAC9B,SAAKS,IAAL,CAAU,KAAKT,MAAL,CAAYU,IAAZ,EAAV;AACA,SAAKC,IAAL,CAAU,QAAV,EAAoBC,KAAKC,KAAL,CAAW,KAAKb,MAAL,CAAYU,IAAZ,EAAX,CAApB;AACA,SAAKV,MAAL,GAAc,EAAd;AACA;AACDM;AACA;;;;;;kBAGaR,Y","file":"parser.js","sourcesContent":["import { Transform } from 'stream'\n\n\n\nclass streamParser extends Transform {\n\t\n\tconstructor(END) {\n\t\tsuper()\n\t\tthis.buffer = ''\n\t\tthis.END = END || '\\r\\n'\n\t}\n\n\t_flush() {\n\t\tthis.buffer = ''\n\t}\n\n\titsFinal(chunk) {\n\t\treturn (chunk.substr(chunk.length - this.END.length).indexOf(this.END)) > -1\n\t}\n\n\t_transform(chunk, encoding, callback) {\n\t\tthis.buffer += chunk.toString('utf8')\n\t\tif(this.itsFinal(this.buffer)) {\n\t\t\tthis.push(this.buffer.trim())\n\t\t\tthis.emit('object', JSON.parse(this.buffer.trim()))\n\t\t\tthis.buffer = ''\n\t\t}\n\t\tcallback()\n\t}\n}\n\nexport default streamParser"]}